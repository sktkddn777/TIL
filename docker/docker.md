## Keyword
`docker`

![](https://media.vlpt.us/images/ye1219/post/f918630e-85c3-451d-88bd-ef4e0f441e95/1_Munnz1-8kv9OgsfrAS11nA.png)

# 도커란?
- 리눅스 컨테이너를 기반으로 하여 특정한 서비스를 패키징하고 배포하는데 유용한  
 오픈소스 프로그램이다.

- 개발 환경을 이미지화 시키고 해당 이미지를 통해 개발 및 배포 환경을 쉽게  
 컨테이너화 시켜 구축할 수 있다.

## 이미지?
 - 도커에서 서비스 운영에 필요한 서버 프로그램, 소스코드 및 라이브러리, 컴파일 된 실행 파일을 묶는 형태를 도커 이미지라고 한다.  
즉, 특정 프로세스를 실행하기 위한 모든 파일과 설정값을 지닌 것이다.  

 - 도커 이미지들은 도커 허브라는 사이트를 통해 버전 관리 및 배포가 이루어진다.  

 - 도커 이미지는 여러 image layer의 집합이다.  
 여러 개의 레이어 상의 파일 시스템을 하나로 다룰 수 있게 해준다.
   
## 컨테이너?
 - 컨테이너는 이미지를 실행한 상태로, 응용프로그램 자체를 패키징, 캡슐화하여 격리된 공간에서 프로세스를 동작시키는 기술이다.

 - 컨테이너를 가상머신과 비교할 수 있는데, 가상머신은 하드웨어 스택을 가상화 하지만 컨테이너는 운영체제 수준에서 가상화를 실시하여 다수의 컨테이너를 OS 커널에서 직접 구동한다.   
 OS 커널을 공유하고 메모리를 OS 전체 부팅 보다 적게 차지한다.

 - 동일한 호스트 상에 여러 컨테이너를 실행해도 원래 존재하는  
 Docker 이미지 이상의 용량을 필요로 하지 않는다.


## 이미지는 프로그램이라고 생각하면 되고 컨테이너는 프로세스라고 생각하면 이해하기 쉬워진다

## 도커 사용 법
 - ### 도커 이미지 사용하기
    - [Docker Hub](https://hub.docker.com/)에서 다운로드를 하거나 스스로 생성할 수 있다.  
    도커 이미지를 자동 구축할 수있도록 설정하는 설정 파일을 Dockerfile이라고 부른다.

    - 도커에서는 컨테이너로써 움직이고 싶은 어플리캐이션이 필요로 하는 최소한의 파일을 Docker 이미지 안에 넣어준다.(이미지 레이어 안에 파일 시스템을 넣는다)
    ```
    # Docker Hub로 부터 python이라는 이름의 도커 이미지 다운
    # docker pull <이미지명>:<tag명>
    $ docker pull python
    ```
    - 도커 이미지를 다운 받으면 이미지를 확인할 수 있다.  
    ```
    $ docker images
    REPOSITORY  TAG       IMAGE ID       CREATED    SIZE
    python    latest    <Image ID>   3 weeks ago   886MB
    ```
    - 도커 이미지를 가지고 컨테이너를 실행시키는 법
    ```
    $ docker run python 
    ```
    - 도커 컨테이너의 상태를 알아보기 위한 명령어
    ```
    $ docker ps -a # 모든 컨테이너
    $ docker ps # 현재 실행중인 컨테이너
    ```
- ### Dockerfile로 빌드하는 흐름
    - Dockerfile을 만든다.
    - docker build로 이미지를 자동 구축한다.
    - 완성된 이미지로 컨테이너를 실행하거나 Docker Hub에 전송한다.

    ```
    $ vim Dockerfile
    $ docker build -t myproject .
    $ docker run -d myproject 
    ```

## 도커 데몬
- Docker 데몬(dockerd)은 API요청을 수신하고 이미지, 컨테이너, 네트워크 및 볼륨과 같은 Docker 객체를 관리한다.  

## 도커 클라이언트
- Docker사용자가 `docker run` 같은 명령어를 사용하면 클라이언트가 이러한 명령을 API로서 dockerd로 보내 실행한다.  
- Docker 클라이언트는 docker.sock에 있는 유닉스 소켓을 통해 도커 데몬의 API를 호출한다.

## 도커 registries
- 도커 이미지를 저장한다.

### 도커 명령어가 실제 도커 엔진이 아닌 클라이언트로서의 도커다.
실제 도커 엔진의 프로세스는 dockerd파일로 실행된다.

