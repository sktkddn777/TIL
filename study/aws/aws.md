## Keyword
`EC2`, `ECS`


## EC2란
- Elastic Compute Cloud Service  
- 독립된 컴퓨터를 임대해주는 서비스로 가상서버가 실행되는 정도에 따라 비용이 상이하다.  
서비스 트래픽이 증가해서 서버가 터질 위험이 오면 자동으로 서버를 스케일링 해주는(auto-scaling) 기능이 있어 서버 부하를 덜어준다.

## Lambda란 
- 별도의 서버 세팅 없이 코드를 함수로 실행하게 해주는 서비스다.  
- 초 단위로 비용이 책정되고 함수를 돌리지 않으면 비용이 발생하지 않는다.   


## ECS란
- Elastic Container Service 
- Docker를 이용해 서비스를 구축 하려면 고려해야 할 사항이 많다.  
- 컨테이너를 적절하게 배치하고 관리할 수 있게 도와주는 컨테이너 오케스트레이션 도구가 필요한데. ECS가 도커 컨테이너를 이용하여 인프라 환경을 더 편리하게 운영, 관리 할 수 있게 해준다.  
- ECS를 Docker를 통해 setup하는 방법은 [여길]() 참고하세요

### ECS관련 용어들
1. Task Definition
    - 원하는 도커 컨테이너를 생성할 때 어떤 설정으로 몇 개 이상 생성할지 정의한 set.  
    - port 매핑, volume설정 같은 docker run으로 가능한 옵션을 매번 지정하는 것이 아니라, 미리 설정들의 집합을 하나의 단위로 정의해서 사용한다.  
    - 한 개 이상의 컨테이너에 대해 정의 가능. Task definition 내부에 정의된 컨테이너 사이는 link 설정으로 연결 가능.
2. Task
    - Task definition에서 정의된대로 생성된 container set을 Task라고 부른다.  
    - Task안에는 한개 이상의 컨테이너가 포함되어 있고, ECS에서 컨테이너를 실행하는 최소 단위는 Task다.  
    - Task는 클러스터에 속한 컨테이너 인스턴스(EC2 인스턴스)에 배포되게 된다.

3. Service
    - Task들의 Life cycle을 관리하는 부분.  
    - Task를 Cluster에 몇개 배포할 것인지 결정. Task를 외부에 서비스 하기 위해 ELB에 연동되는 부분을 관리.
    - 오토스케일링과 로드 밸런싱을 관리.

4. Container Instance(EC2 Instance)
    - ECS는 Task배포를 Container Instance기반에 올리도록 설계됨.
    - 하나의 Container Instance내부에는 여러 Task가 있을 수 있다.

5. Cluster
    - Container Instance들은 논리적인 그룹으로 묶이게 되는데 이 단위가 Cluster이다.  
    - Task배포를 위한 Instance는 반드시 Cluster에 등록되어야 한다.


## ELB란
- Elastic Load Balancer(부하를 적절하게 분배해주는 장치)   
자동으로 로드 밸런싱을 제공하며 시스템이 서버가 죽지 않도록 알아서 관리 해준다.  
- 트래픽 분산, 자동 확장, 오류가 있는 시스템 배제 ....

- 사용자가 로드벨런서 포트로 웹에 접속, 사용자가 접속하면 로드 밸런서는 적당한 웹서버에 분배. Instance Port를 통해 웹 서버와 통신.
- NGINX로도 로드밸런싱이 가능은 하지만 둘다 사용하는 것이 가장 좋다고 한다.  


## ECR이란
- ECR이란 개발자가 Docker 컨테이너 이미지를 쉽게 저장. 관리 및 배포 할 수 있게 해주는 완전 관리형 Docker 컨테이너 저장소이다.
- 도커의 이미지는 어느 환경 어느 OS의 서버에서 격리되어 작동하므로 외부의 환경에 영향을 거의 받지 않는다.
- 도커 이미지를 만들고 저장소에 저장하여 서버에서 실행시킨다.
- 저장하는 방법은 aws ecr에 들어가면 푸쉬커멘드가 있는데 그 부분을 따라하면 된다.

## Fargate란
- EC2처럼 기본 인프라를 관리할 필요 없이 컨테이너를 배포하고 관리할 수 있는 기능.  
-> 컨테이너만 올리면 분산처리하여 서버가 꺼지지 않도록 배포를 도와준다.




